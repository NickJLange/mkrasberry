---
# Deploy gcloud OAuth credentials to remote hosts
#
# Before running, copy your local credentials to the role files directory:
#   cp ~/.config/gcloud/credentials.db roles/role-install-gcloud/files/
#   cp ~/.config/gcloud/access_tokens.db roles/role-install-gcloud/files/
#   cp ~/.config/gcloud/active_config roles/role-install-gcloud/files/
#   cp ~/.config/gcloud/configurations/config_default roles/role-install-gcloud/files/
#
# Usage: 
#   make gcloud-credentials hostlist=hostname
#   or
#   ansible-playbook -e hostlist=hostname playbooks/gcloud-credentials-deploy.yml

- hosts: "{{ hostlist | default('do_not_match_ever')}}"
  remote_user: "{{ local_ssh_user }}"
  become: true
  tasks:
    - name: Include gcloud OAuth credential deployment
      ansible.builtin.include_tasks:
        file: "../roles/role-install-gcloud/tasks/deploy_oauth_credentials.yml"
